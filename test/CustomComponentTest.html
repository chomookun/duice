<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Custom Component Test</title>
    <script src="../dist/duice.js"></script>
    <link rel="stylesheet" href="../dist/duice.css">
    <script>
        'use strict';
        let myObject = new duice.ObjectProxy({
            id: 'apple',
            name: 'Apple',
        });

        let myArray = new duice.ArrayProxy([
            { id: 'apple', name: 'Apple' },
            { id: 'orange', name: 'Orange' }
        ]);

        /**
         * MyObjectComponent
         */
        duice.defineComponent("my-object", class MyObjectComponent extends duice.CustomElement {
            doRender(object) {
                return `
                    <div>
                        <span data-duice-object="object" data-duice-property="name"></span>
                        <input type="text" data-duice-object="object" data-duice-property="name" class="bg-red"/>
                    </div>
                `;
            }
            doStyle(data) {
                return `
                    .bg-red {
                        background-color: red;
                    }
                `;
            }
        });

        /**
         * MyArrayComponent
         */
        duice.defineComponent("my-array", class MyArrayComponent extends duice.CustomElement {
            doRender(array) {
                return `
                <div>
                    <div data-duice-array="array" data-duice-loop="item,status">
                        <input type="text" data-duice-object="item" data-duice-property="name"/>
                    </div>
                </div>
                `;
            }
        });

        /**
         * my-array-nested
         */
        duice.defineComponent("my-array-nested", class MyNestedComponent extends duice.CustomElement {
            doRender(array) {
                return `
                <div>
                    <div data-duice-array="array" data-duice-loop="item,status">
                        <my-object data-duice-object="item"></my-object>
                    </div>
                </div>
                `;
            }
        });

        /**
         * MyShadowComponent
         */
        duice.defineComponent("my-object-shadow", class MyShadowComponent extends duice.CustomElement {
            constructor(){
                super();
                this.attachShadow({mode:"open"});
            }
            doRender(object) {
                return `
                    <div>
                        <span data-duice-object="object" data-duice-property="name"></span>
                        <input type="text" data-duice-object="object" data-duice-property="name"/>
                    </div>
                `;
            }
        });

    </script>
</head>
<body>

<h2> Direct HTML</h2>
<input type="text" data-duice-object="myObject" data-duice-property="name" style="background-color:red;"/>

<h2>Object to Component</h2>
<my-object data-duice-object="myObject"></my-object>

<h2>Array to Component</h2>
<my-array data-duice-array="myArray"></my-array>

<h2>Nested Component</h2>
<my-array-nested data-duice-array="myArray"></my-array-nested>

<h2>Shadow DOM Component</h2>
<my-object-shadow data-duice-object="myObject"></my-object-shadow>

</body>
</html>