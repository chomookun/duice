<html>
<head>
    <script src="../../dist/duice.js"></script>
    <script>
        let myArray = duice.DataSet.create([
            {name:'Apple', type:'A', childs:['A1','A2']},
            {name:'Orange', type:'B', childs:['B1','B2']},
            {name:'Banana', type:'C', childs:['C1','C2']},
        ]);
        //
        // window.addEventListener('DOMContentLoaded', event => {
        //     console.log("== DOMContentLoaded");
        //     let components = document.querySelectorAll("*[duice\\:bind]");
        //     components.forEach(component => {
        //         initializeComponent(component, {});
        //     });
        //
        // });
        //
        // function initializeComponent(component, context) {
        //     if(!component.hasAttribute('duice:id')){
        //         console.log(component);
        //     }
        //     component.setAttribute('duice:id','loaded');
        //     let childComponents = component.querySelectorAll("*[duice\\:bind]");
        //     childComponents.forEach(childComponent => {
        //         initializeComponent(childComponent, context);
        //     });
        // }
    </script>
</head>
<body>
<h1> data list </h1>
<table duice:bind="myArray" duice:editable="true">
    <thead>
    <tr>
        <td>No</td>
        <td>Name</td>
        <td>Type</td>
        <td>list</td>
    </tr>
    </thead>
    <tbody>
    <tr duice:for-each="item,index">
        <td>
      <span duice:bind="item">
       {{ index+1 }}
      </span>
        </td>
        <td>
            <input duice:="item" duice:property="name" mask="###-####-####"/>
        </td>
        <td>
            <select duice:bind="item" duice:property="type">
                <option duice:for-each="(type,index) in types" duice:value="type.id">
                    {{ type.name }}
                </option>
            </select>
        </td>
        <td>
            <table duice:bind="item.chillds">
                <tr>
                    <td colspan="100%">
         <span duice:for-each="(child,index) in item.childs">
          {{ child }}
         </span>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr duice:bind="myArray" duice:if="myArray.length===0">
        <td colspan="4">Data Not Found</td>
    </tr>
    </tbody>
</table>
<hr/>
<input is="duice" duice:bind="item" duice:property="name"/>

</body>
</html>